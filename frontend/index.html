<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS Portfolio - Backoffice</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --sidebar-bg: #1e293b;
            --sidebar-hover: #334155;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
        }
        
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 250px;
            background: var(--sidebar-bg);
            padding-top: 20px;
            z-index: 100;
        }
        
        .sidebar-brand {
            padding: 0 20px 30px;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .sidebar-menu li {
            margin-bottom: 5px;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #cbd5e1;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: var(--sidebar-hover);
            color: white;
        }
        
        .sidebar-menu i {
            margin-right: 12px;
            width: 20px;
        }
        
        .main-content {
            margin-left: 250px;
            padding: 30px;
        }
        
        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: var(--primary);
            border: none;
        }
        
        .btn-primary:hover {
            background: #1d4ed8;
        }
        
        .table-actions button {
            padding: 5px 10px;
            margin: 0 2px;
        }
        
        .badge-tech {
            background: #e0e7ff;
            color: #3730a3;
            padding: 5px 10px;
            border-radius: 20px;
            margin: 2px;
        }
        
        .modal-header {
            background: var(--primary);
            color: white;
        }
        
        .view-section {
            display: none;
        }
        
        .view-section.active {
            display: block;
        }
        
        .stats-card {
            background: linear-gradient(135deg, var(--primary) 0%, #1d4ed8 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .stats-card h3 {
            font-size: 36px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-briefcase"></i> Portfolio CMS
        </div>
        <ul class="sidebar-menu">
            <li><a href="#" class="menu-link active" data-view="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="#" class="menu-link" data-view="projects"><i class="fas fa-project-diagram"></i> Projets</a></li>
            <li><a href="#" class="menu-link" data-view="technologies"><i class="fas fa-code"></i> Technologies</a></li>
            <li><a href="#" class="menu-link" data-view="collaborators"><i class="fas fa-users"></i> Collaborateurs</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard View -->
        <div id="dashboard" class="view-section active">
            <div class="header">
                <h1><i class="fas fa-chart-line"></i> Dashboard</h1>
                <p class="text-muted mb-0">Vue d'ensemble de votre portfolio</p>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="stats-card">
                        <i class="fas fa-project-diagram fa-2x"></i>
                        <h3 id="projectCount">0</h3>
                        <p>Projets</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stats-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                        <i class="fas fa-code fa-2x"></i>
                        <h3 id="techCount">0</h3>
                        <p>Technologies</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stats-card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                        <i class="fas fa-users fa-2x"></i>
                        <h3 id="collabCount">0</h3>
                        <p>Collaborateurs</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Projects View -->
        <div id="projects" class="view-section">
            <div class="header d-flex justify-content-between align-items-center">
                <div>
                    <h1><i class="fas fa-project-diagram"></i> Gestion des Projets</h1>
                </div>
                <button class="btn btn-primary" onclick="openProjectModal()">
                    <i class="fas fa-plus"></i> Nouveau Projet
                </button>
            </div>
            
            <div class="card">
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Titre</th>
                                <th>Description</th>
                                <th>Technologies</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="projectsList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Technologies View -->
        <div id="technologies" class="view-section">
            <div class="header d-flex justify-content-between align-items-center">
                <div>
                    <h1><i class="fas fa-code"></i> Gestion des Technologies</h1>
                </div>
                <button class="btn btn-primary" onclick="openTechModal()">
                    <i class="fas fa-plus"></i> Nouvelle Technologie
                </button>
            </div>
            
            <div class="card">
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Catégorie</th>
                                <th>Niveau</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="techList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Collaborators View -->
        <div id="collaborators" class="view-section">
            <div class="header d-flex justify-content-between align-items-center">
                <div>
                    <h1><i class="fas fa-users"></i> Gestion des Collaborateurs</h1>
                </div>
                <button class="btn btn-primary" onclick="openCollabModal()">
                    <i class="fas fa-plus"></i> Nouveau Collaborateur
                </button>
            </div>
            
            <div class="card">
                <div class="card-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Nom</th>
                                <th>Rôle</th>
                                <th>Email</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="collabList"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Modal -->
    <div class="modal fade" id="projectModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="projectModalTitle">Nouveau Projet</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="projectForm">
                        <input type="hidden" id="projectId">
                        <div class="mb-3">
                            <label class="form-label">Titre</label>
                            <input type="text" class="form-control" id="projectTitle" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="projectDescription" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">URL du projet</label>
                            <input type="url" class="form-control" id="projectUrl">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Technologies (séparer par des virgules)</label>
                            <input type="text" class="form-control" id="projectTech" placeholder="React, Node.js, MongoDB">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="projectDate" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" onclick="saveProject()">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Technology Modal -->
    <div class="modal fade" id="techModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="techModalTitle">Nouvelle Technologie</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="techForm">
                        <input type="hidden" id="techId">
                        <div class="mb-3">
                            <label class="form-label">Nom</label>
                            <input type="text" class="form-control" id="techName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Catégorie</label>
                            <select class="form-select" id="techCategory" required>
                                <option value="">Sélectionner...</option>
                                <option value="Frontend">Frontend</option>
                                <option value="Backend">Backend</option>
                                <option value="Database">Base de données</option>
                                <option value="DevOps">DevOps</option>
                                <option value="Other">Autre</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Niveau</label>
                            <select class="form-select" id="techLevel" required>
                                <option value="">Sélectionner...</option>
                                <option value="Débutant">Débutant</option>
                                <option value="Intermédiaire">Intermédiaire</option>
                                <option value="Avancé">Avancé</option>
                                <option value="Expert">Expert</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" onclick="saveTech()">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Collaborator Modal -->
    <div class="modal fade" id="collabModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="collabModalTitle">Nouveau Collaborateur</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="collabForm">
                        <input type="hidden" id="collabId">
                        <div class="mb-3">
                            <label class="form-label">Nom complet</label>
                            <input type="text" class="form-control" id="collabName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Rôle</label>
                            <input type="text" class="form-control" id="collabRole" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="collabEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">LinkedIn</label>
                            <input type="url" class="form-control" id="collabLinkedin">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-primary" onclick="saveCollab()">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Data storage
        let projects = [];
        let technologies = [];
        let collaborators = [];

        // Navigation
        document.querySelectorAll('.menu-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const view = link.dataset.view;
                
                document.querySelectorAll('.menu-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
                document.getElementById(view).classList.add('active');
            });
        });

        // Projects CRUD
        function openProjectModal(id = null) {
            const modal = new bootstrap.Modal(document.getElementById('projectModal'));
            const title = document.getElementById('projectModalTitle');
            
            if (id) {
                const project = projects.find(p => p.id === id);
                title.textContent = 'Modifier le Projet';
                document.getElementById('projectId').value = project.id;
                document.getElementById('projectTitle').value = project.title;
                document.getElementById('projectDescription').value = project.description;
                document.getElementById('projectUrl').value = project.url || '';
                document.getElementById('projectTech').value = project.technologies.join(', ');
                document.getElementById('projectDate').value = project.date;
            } else {
                title.textContent = 'Nouveau Projet';
                document.getElementById('projectForm').reset();
                document.getElementById('projectId').value = '';
            }
            
            modal.show();
        }

        function saveProject() {
            const id = document.getElementById('projectId').value;
            const project = {
                id: id || Date.now(),
                title: document.getElementById('projectTitle').value,
                description: document.getElementById('projectDescription').value,
                url: document.getElementById('projectUrl').value,
                technologies: document.getElementById('projectTech').value.split(',').map(t => t.trim()),
                date: document.getElementById('projectDate').value
            };

            if (id) {
                const index = projects.findIndex(p => p.id == id);
                projects[index] = project;
            } else {
                projects.push(project);
            }

            renderProjects();
            updateStats();
            bootstrap.Modal.getInstance(document.getElementById('projectModal')).hide();
        }

        function deleteProject(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce projet ?')) {
                projects = projects.filter(p => p.id !== id);
                renderProjects();
                updateStats();
            }
        }

        function renderProjects() {
            const list = document.getElementById('projectsList');
            list.innerHTML = projects.map(p => `
                <tr>
                    <td><strong>${p.title}</strong></td>
                    <td>${p.description.substring(0, 50)}...</td>
                    <td>${p.technologies.map(t => `<span class="badge-tech">${t}</span>`).join('')}</td>
                    <td>${new Date(p.date).toLocaleDateString('fr-FR')}</td>
                    <td class="table-actions">
                        <button class="btn btn-sm btn-warning" onclick="openProjectModal(${p.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteProject(${p.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Technologies CRUD
        function openTechModal(id = null) {
            const modal = new bootstrap.Modal(document.getElementById('techModal'));
            const title = document.getElementById('techModalTitle');
            
            if (id) {
                const tech = technologies.find(t => t.id === id);
                title.textContent = 'Modifier la Technologie';
                document.getElementById('techId').value = tech.id;
                document.getElementById('techName').value = tech.name;
                document.getElementById('techCategory').value = tech.category;
                document.getElementById('techLevel').value = tech.level;
            } else {
                title.textContent = 'Nouvelle Technologie';
                document.getElementById('techForm').reset();
                document.getElementById('techId').value = '';
            }
            
            modal.show();
        }

        function saveTech() {
            const id = document.getElementById('techId').value;
            const tech = {
                id: id || Date.now(),
                name: document.getElementById('techName').value,
                category: document.getElementById('techCategory').value,
                level: document.getElementById('techLevel').value
            };

            if (id) {
                const index = technologies.findIndex(t => t.id == id);
                technologies[index] = tech;
            } else {
                technologies.push(tech);
            }

            renderTechnologies();
            updateStats();
            bootstrap.Modal.getInstance(document.getElementById('techModal')).hide();
        }

        function deleteTech(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette technologie ?')) {
                technologies = technologies.filter(t => t.id !== id);
                renderTechnologies();
                updateStats();
            }
        }

        function renderTechnologies() {
            const list = document.getElementById('techList');
            list.innerHTML = technologies.map(t => `
                <tr>
                    <td><strong>${t.name}</strong></td>
                    <td><span class="badge bg-primary">${t.category}</span></td>
                    <td>${t.level}</td>
                    <td class="table-actions">
                        <button class="btn btn-sm btn-warning" onclick="openTechModal(${t.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteTech(${t.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Collaborators CRUD
        function openCollabModal(id = null) {
            const modal = new bootstrap.Modal(document.getElementById('collabModal'));
            const title = document.getElementById('collabModalTitle');
            
            if (id) {
                const collab = collaborators.find(c => c.id === id);
                title.textContent = 'Modifier le Collaborateur';
                document.getElementById('collabId').value = collab.id;
                document.getElementById('collabName').value = collab.name;
                document.getElementById('collabRole').value = collab.role;
                document.getElementById('collabEmail').value = collab.email;
                document.getElementById('collabLinkedin').value = collab.linkedin || '';
            } else {
                title.textContent = 'Nouveau Collaborateur';
                document.getElementById('collabForm').reset();
                document.getElementById('collabId').value = '';
            }
            
            modal.show();
        }

        function saveCollab() {
            const id = document.getElementById('collabId').value;
            const collab = {
                id: id || Date.now(),
                name: document.getElementById('collabName').value,
                role: document.getElementById('collabRole').value,
                email: document.getElementById('collabEmail').value,
                linkedin: document.getElementById('collabLinkedin').value
            };

            if (id) {
                const index = collaborators.findIndex(c => c.id == id);
                collaborators[index] = collab;
            } else {
                collaborators.push(collab);
            }

            renderCollaborators();
            updateStats();
            bootstrap.Modal.getInstance(document.getElementById('collabModal')).hide();
        }

        function deleteCollab(id) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce collaborateur ?')) {
                collaborators = collaborators.filter(c => c.id !== id);
                renderCollaborators();
                updateStats();
            }
        }

        function renderCollaborators() {
            const list = document.getElementById('collabList');
            list.innerHTML = collaborators.map(c => `
                <tr>
                    <td><strong>${c.name}</strong></td>
                    <td>${c.role}</td>
                    <td>${c.email}</td>
                    <td class="table-actions">
                        <button class="btn btn-sm btn-warning" onclick="openCollabModal(${c.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteCollab(${c.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Update dashboard stats
        function updateStats() {
            document.getElementById('projectCount').textContent = projects.length;
            document.getElementById('techCount').textContent = technologies.length;
            document.getElementById('collabCount').textContent = collaborators.length;
        }

        // Initialize with sample data
        projects = [
            {
                id: 1,
                title: "Site E-commerce",
                description: "Plateforme de vente en ligne complète avec panier et paiement",
                url: "https://exemple.com",
                technologies: ["React", "Node.js", "MongoDB"],
                date: "2024-01-15"
            }
        ];

        technologies = [
            { id: 1, name: "React", category: "Frontend", level: "Avancé" },
            { id: 2, name: "Node.js", category: "Backend", level: "Avancé" }
        ];

        collaborators = [
            { id: 1, name: "Jean Dupont", role: "Designer UI/UX", email: "jean@exemple.com", linkedin: "" }
        ];

        // Initial render
        renderProjects();
        renderTechnologies();
        renderCollaborators();
        updateStats();
    </script>
</body>
</html>